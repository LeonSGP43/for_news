# 舆情监控平台

基于 React + Express + Gemini AI 的全网舆情监控与智能分析系统。

## 功能特性

### 1. 📰 数据聚合
- 按平台分组展示新闻数据
- 支持按 rank 排序
- 实时显示热度、趋势变化
- 支持平台筛选

### 2. 📊 智能分析
- **热词分析**：提取高频关键词
- **情感分析**：分析舆论情感倾向
- **趋势预测**：识别上升话题
- **综合摘要**：生成舆情简报
- **跨平台分析**：发现多平台热点

### 3. 💬 问答助手
- 基于新闻数据的智能问答
- 支持选择时间范围（1-24小时）
- 减少 AI 幻觉，只基于真实数据回答

## 架构设计

```
┌─────────────────────────────────────────────────────────┐
│                    Frontend (React)                      │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │
│  │  NewsFeed   │ │  Analysis   │ │    Chat     │        │
│  └─────────────┘ └─────────────┘ └─────────────┘        │
└─────────────────────────────────────────────────────────┘
                           │
                           ▼
┌─────────────────────────────────────────────────────────┐
│                   Backend (Express)                      │
│  ┌─────────────┐ ┌─────────────┐ ┌─────────────┐        │
│  │  /articles  │ │  /analysis  │ │   /chat     │        │
│  └─────────────┘ └─────────────┘ └─────────────┘        │
│                    ┌─────────────┐                       │
│                    │  /webhook   │ ← 爬虫完成回调        │
│                    └─────────────┘                       │
└─────────────────────────────────────────────────────────┘
          │                              │
          ▼                              ▼
    ┌──────────┐                  ┌──────────────┐
    │  MySQL   │                  │  Gemini AI   │
    │ (你的DB) │                  │  1.5 Pro/Flash│
    └──────────┘                  └──────────────┘
```

## 快速开始

### 1. 安装依赖
```bash
npm install
```

### 2. 配置环境变量
```bash
cp .env.example .env
# 编辑 .env 填入你的配置
```

### 3. 启动服务
```bash
# 同时启动前端和后端
npm run dev:all

# 或分别启动
npm run dev      # 前端 (Vite)
npm run server   # 后端 (Express)
```

### 4. 访问
- 前端: http://localhost:5173
- API: http://localhost:3001

## Webhook 集成

爬虫完成后，发送 POST 请求到：
```
POST http://your-server:3001/api/webhook/crawl-complete
```

这会触发自动分析任务。

## 为什么不用 RAG？

对于你的场景，**Context Stuffing 比 Vector RAG 更合适**：

1. **数据量可控**：3500条/小时 ≈ 35-70万 tokens，Gemini 1.5 Pro 支持 100万 token 上下文
2. **结构化数据**：rank、heat、platform 等字段用 SQL 查询更精准
3. **全局上下文**：直接喂入所有数据，AI 能看到完整的排名和趋势关系

如果未来数据量增长到无法放入上下文，可以考虑：
- 先用 SQL 过滤（时间、平台、关键词）
- 再将过滤结果喂给 AI

## 技术栈

- **前端**: React 18 + TypeScript + Tailwind CSS + Zustand
- **后端**: Express + TypeScript + mysql2
- **AI**: Google Gemini 1.5 Pro/Flash
- **数据库**: MySQL (你现有的)
